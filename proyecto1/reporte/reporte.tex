\documentclass[12pt]{book}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage[normalem]{ulem}
\usepackage[hidelinks]{hyperref}

\usepackage{listings, tcolorbox, xcolor, float}
\usepackage{algorithm, algpseudocode, chngcntr}
\usepackage{graphicx, enumitem, geometry}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{forest}
\usepackage{fancyhdr}

% ----- Custom Page -----
\geometry{margin=2.5cm}
\pagestyle{fancy}
\fancyhf{}
%------------------------

% ----- Custom Commands -----
\newcommand{\nt}[1]{\texttt{<#1>}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\minilisp}{
  {M\footnotesize INI\normalsize L\footnotesize ISP \normalsize}
}
\renewcommand{\lstlistingname}{Código}
\renewcommand{\bibname}{Bibliografía}
%----------------------------

% ----- Book Document -----
% ----- Quitar mayúsculas automáticas -----
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{#1}}

% ----- Encabezados -----
\lhead{\minilisp}
\rhead{\leftmark{}.}
\cfoot{\thepage} % número centrado abajo
\renewcommand{\headrulewidth}{0.4pt}

% ----- Cambiar el título del índice -----
\addto\captionsspanish{%
  \renewcommand{\contentsname}{Índice} % cambia "Índice general" a "Índice"
}

% ----- Evitar mayúsculas en el encabezado del índice -----
\makeatletter
\renewcommand{\tableofcontents}{%
  \chapter*{\contentsname}% título "Índice"
  \markboth{\contentsname}{}% encabezado sin mayúsculas
  \@starttoc{toc}% genera el contenido real
}
\makeatother
%--------------------------

% ----- Custom Colors -----
\definecolor{azulin}{HTML}{130F87}
\definecolor{grisin}{HTML}{6D6C91}
\definecolor{links}{HTML}{0D1894}
\definecolor{mainkeywordcolor}{HTML}{610E61}
\definecolor{commentcolor}{HTML}{087008}
\definecolor{stringcolor}{HTML}{AD8318}
\definecolor{ops}{HTML}{3374A1}
\definecolor{tok}{HTML}{B39309}
\definecolor{tkns}{HTML}{560769}
\definecolor{asa}{HTML}{A81666}
\definecolor{corchets}{HTML}{A82E16}

\definecolor{secondkeywordcolor}{HTML}{0D1894}
\definecolor{thirdkeywordcolor}{HTML}{0D1894}

\definecolor{backgroundcolor}{rgb}{0.95, 0.95, 0.95}
%--------------------------

% ----- Haskell Code Style -----
\lstdefinestyle{haskellstyle}{
  language=Haskell,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=[1]\color{mainkeywordcolor}\bfseries,
  commentstyle=\color{commentcolor}\itshape,
  stringstyle=\color{stringcolor},
  numbers=left,
  numberstyle=\tiny,
  stepnumber=1,
  numbersep=8pt,
  backgroundcolor=\color{backgroundcolor},
  tabsize=4,
  showspaces=false,
  showstringspaces=false,
  breaklines=true,
  frame=single,
  captionpos=b,
  morekeywords=[1]{if,then,else,let,in,case,of,Show,Eq,
    data,type,class,instance,where, do,deriving,newtype,module,import},
  literate=
  {Maybe}{{{\textcolor{azulin}{Maybe}}}}5
  {Just}{{{\textcolor{azulin}{Just}}}}4
  {Nothing}{{{\textcolor{azulin}{Nothing}}}}7
  {True}{{{\textcolor{azulin}{True}}}}4
  {False}{{{\textcolor{azulin}{False}}}}5
  {IO}{{{\textcolor{azulin}{IO}}}}2
  {=}{{{\textcolor{ops}{=}}}}1
  {|}{{{\textcolor{ops}{|}}}}1
  {::}{{{\textcolor{ops}{::}}}}2
  {[}{{{\textcolor{corchets}{[}}}}1
  {]}{{{\textcolor{corchets}{]}}}}1,
  classoffset=1,
  morekeywords={Token},
  keywordstyle=\color{tok},
  classoffset=2,
  morekeywords={ASA},
  keywordstyle=\color{asa},
  classoffset=0,
}
%-------------------------------

%-------------------------------
\begin{document}

% ----- Importamos la portada -----
\input{portada}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Ajustes para el pdf -----
\clearpage
\pagenumbering{arabic}
\setcounter{page}{1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Iniciamos el indice -----
\tableofcontents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Introducción -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{cap1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Sintaxis Concreta -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{cap2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Sintaxis Abstracta -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\include{cap3}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Azúcar Sintáctica -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{cap4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Intérprete -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{cap5}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Resultados -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{cap6}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ----- Conclusiones -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{cap7}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% ----- Bibliografía -----
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addcontentsline{toc}{chapter}{Bibliografía}
\begin{thebibliography}{99}
\bibitem{ref1} \textcolor{links}{\uline{\url{https://weblibrary.mila.edu.my/upload/ebook/engineering/2017_Book_FoundationsOfProgrammingLangua.pdf}}}
\bibitem{ref2} Aho, A. V., Lam, S. M., Sethi, R., \& Ullman, J. D. Compilers: Principles, Techniques, and Tools. [Second Edition]. 2007.
\bibitem{ref3} Disponible en: \textcolor{links}{\uline{\url{https://lambdasspace.github.io/LDP/notas/ldp_n04.pdf}}}
\bibitem{ref4} Disponible en: \textcolor{links}{\uline{\url{https://lambdasspace.github.io/LDP/notas/ldp_n05.pdf}}}
\bibitem{ref4} Documentación Haskell. Disponible en: \textcolor{links}{\uline{\url{https://www.haskell.org}}}
\bibitem{ref5} Documentación Alex(Haskell) The Alex Lexer Generator for Haskell Programming in Haskell (Graham Hutton, 2nd Edition). Sección sobre parsers y lexers. Disponible en: \textcolor{links}{\uline{\url{https://www.haskell.org/alex/}}}
\bibitem{ref6} Marlow, S., Gill, A. (2009). Happy. Disponible en: \textcolor{links}{\uline{\url{https://www.haskell.org/happy/}}}
\bibitem{ref7} Disponible en: \textcolor{links}{\uline{\url{https://lambdasspace.github.io/LDP/notas/ldp_n08.pdf}}}
\bibitem{ref8} Disponible en: \textcolor{links}{\uline{\url{https://lambdasspace.github.io/LDP/notas/ldp_n09.pdf}}}
\bibitem{ref9} Disponible en: \textcolor{links}{\uline{\url{https://lambdasspace.github.io/LDP/notas/ldp_n10.pdf}}}
\bibitem{ref10} Disponible en: \textcolor{links}{\uline{\url{https://docs.racket-lang.org/reference/let.html}}}
\bibitem{ref11} Disponible en: \textcolor{links}{\uline{\url{https://www.lispworks.com/documentation/HyperSpec/Body/s_let_l.htm}}}

\end{thebibliography}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
%-------------------------------
